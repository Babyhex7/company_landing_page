---
import BaseLayout from '../../layouts/BaseLayout.astro';
import CTA from '../../components/sections/CTA.astro';
import { getServices, getStrapiMediaUrl } from '../../lib/strapi';

const services = await getServices();

// Default services if Strapi is not available
const defaultServices = [
  {
    title: 'Web Development',
    description: 'Custom web applications built with modern technologies like React, Next.js, and Astro. We create fast, secure, and scalable solutions.',
    icon: 'code',
    slug: 'web-development',
    features: ['Custom Web Applications', 'E-commerce Solutions', 'Progressive Web Apps', 'API Development']
  },
  {
    title: 'Mobile Development',
    description: 'Native and cross-platform mobile apps for iOS and Android. We deliver smooth, intuitive experiences on any device.',
    icon: 'smartphone',
    slug: 'mobile-development',
    features: ['iOS Development', 'Android Development', 'React Native', 'Flutter']
  },
  {
    title: 'UI/UX Design',
    description: 'Beautiful, intuitive interfaces designed with user experience at the forefront. From wireframes to high-fidelity prototypes.',
    icon: 'design',
    slug: 'ui-ux-design',
    features: ['User Research', 'Wireframing', 'Prototyping', 'Design Systems']
  },
  {
    title: 'Cloud Solutions',
    description: 'Scalable cloud infrastructure and DevOps services. We optimize your operations with modern cloud architecture.',
    icon: 'cloud',
    slug: 'cloud-solutions',
    features: ['AWS / GCP / Azure', 'CI/CD Pipelines', 'Containerization', 'Serverless']
  },
  {
    title: 'AI Integration',
    description: 'Implement AI and machine learning solutions to automate and enhance your business processes.',
    icon: 'ai',
    slug: 'ai-integration',
    features: ['Machine Learning', 'Natural Language Processing', 'Computer Vision', 'Chatbots']
  },
  {
    title: 'Consulting',
    description: 'Strategic technology consulting to help you make informed decisions and plan your digital transformation.',
    icon: 'consulting',
    slug: 'consulting',
    features: ['Technical Assessment', 'Digital Strategy', 'Architecture Planning', 'Team Training']
  }
];

const displayServices = services?.length ? services : defaultServices;

// Icon mapping
const icons: Record<string, string> = {
  code: `<svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/></svg>`,
  smartphone: `<svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"/></svg>`,
  design: `<svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/></svg>`,
  cloud: `<svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"/></svg>`,
  ai: `<svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>`,
  consulting: `<svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>`
};
---

<BaseLayout 
  title="Our Services - NexaTech" 
  description="Explore our comprehensive digital services including web development, mobile apps, UI/UX design, cloud solutions, and more."
>
  <!-- Hero Section -->
  <section class="pt-40 pb-20">
    <div class="container mx-auto px-6">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="animate-fade-up text-display font-bold text-white mb-6">
          Comprehensive <span class="gradient-text">Digital Solutions</span>
        </h1>
        <p class="animate-fade-up delay-200 text-xl text-slate-400 leading-relaxed">
          From concept to deployment, we provide end-to-end services to bring your vision to life.
        </p>
      </div>
    </div>
  </section>

  <!-- Services Grid -->
  <section class="section">
    <div class="container mx-auto px-6">
      <div class="space-y-8">
        {displayServices.map((service: any, index: number) => (
          <div class={`animate-fade-up delay-${(index % 3 + 1) * 100} glass-card p-8 md:p-12`}>
            <div class="grid lg:grid-cols-3 gap-8 items-start">
              <!-- Icon & Title -->
              <div class="lg:col-span-1">
                <div class="w-20 h-20 rounded-3xl bg-gradient-to-br from-indigo-500/20 to-purple-500/20 flex items-center justify-center text-indigo-400 mb-6">
                  <Fragment set:html={icons[service.icon] || icons.code} />
                </div>
                <h2 class="text-2xl font-bold text-white mb-3">{service.title}</h2>
                <a 
                  href={`/services/${service.slug}`}
                  class="inline-flex items-center gap-2 text-indigo-400 font-medium hover:text-indigo-300 transition-colors"
                >
                  Learn More
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                  </svg>
                </a>
              </div>

              <!-- Description -->
              <div class="lg:col-span-1">
                <p class="text-slate-400 leading-relaxed">{service.description}</p>
              </div>

              <!-- Features -->
              <div class="lg:col-span-1">
                <h4 class="text-sm font-semibold text-slate-500 uppercase tracking-wider mb-4">What's Included</h4>
                <ul class="space-y-3">
                  {(service.features || ['Feature 1', 'Feature 2', 'Feature 3', 'Feature 4']).map((feature: string) => (
                    <li class="flex items-center gap-3 text-slate-300">
                      <svg class="w-5 h-5 text-indigo-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                      </svg>
                      {feature}
                    </li>
                  ))}
                </ul>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Process Section -->
  <section class="section">
    <div class="container mx-auto px-6">
      <div class="text-center max-w-3xl mx-auto mb-16">
        <h2 class="animate-fade-up text-heading font-bold text-white mb-6">
          How We <span class="gradient-text">Work</span>
        </h2>
        <p class="animate-fade-up delay-200 text-lg text-slate-400">
          Our proven process ensures successful project delivery every time.
        </p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
        {[
          { step: '01', title: 'Discovery', description: 'We understand your goals, requirements, and vision through in-depth discussions.' },
          { step: '02', title: 'Planning', description: 'We create detailed roadmaps, wireframes, and technical specifications.' },
          { step: '03', title: 'Development', description: 'Our team builds your solution using agile methodologies with regular updates.' },
          { step: '04', title: 'Launch', description: 'We deploy, test, and provide ongoing support to ensure success.' }
        ].map((item, index) => (
          <div class={`animate-fade-up delay-${(index + 1) * 100} card relative`}>
            <span class="text-6xl font-bold gradient-text opacity-30">{item.step}</span>
            <h3 class="text-xl font-bold text-white mt-4 mb-2">{item.title}</h3>
            <p class="text-slate-400">{item.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <CTA />
</BaseLayout>
